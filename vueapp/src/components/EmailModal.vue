<template>
    <div/>
</template>

<script type="text/javascript">
import emailjs from '@emailjs/browser';
emailjs.init("user_EAOcZjTlgI1klK7aFHxW3");

//There is no need for any html, will have to make for loop with assigned object and call this modal each time to get it to call per email and return success on no errors

export default ({
    /* value will be who sends what to who, generated by santa setup
     * {toName, toEmail, generalMsg, assignedName, assignedMsg}
     */
    props: ['value'],
    methods: {
        sendEmail(){
            //this is where teh email will actually be sent, set a data value to get in the return value
            var templateData = { // template data

                to_name: this.value.toName,
                to_email: this.value.toEmail,
                general_message: this.value.generalMsg,
                assigned_name: this.value.assignedName,
                assigned_details: this.value.assignedMsg


                // to_name: "Ben Dover",
                // to_email: "katheryn.l.taylor@gmail.com",
                // general_message: "$20 maximum",
                // assigned_name: "Kate",
                // assigned_details: "I love parrots!"
                
            };
            try {
                emailjs.send('service_u6y98dj', 'template_h8111ee', templateData);
            } catch(error) {
                this.$emit(error, this.value.toEmail);
            }
        }
    },
    mounted(){
        console.log('hi im in mounted');
        //this.sendEmail();
    }
})

</script>


